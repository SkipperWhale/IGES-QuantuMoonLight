<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <meta charset="utf-8">
    <title> QuantuMoonLight </title>
    <link rel="icon" href="../static/images/logos/logo.ico">

    <!-- Stylesheets -->
    <link href="../static/styles/css/revolution-slider.css" rel="stylesheet">
    <link href="../static/styles/css/style.css" rel="stylesheet">
    <link href="../static/styles/css/nav.css" rel="stylesheet">
    <link rel="stylesheet" href="../static/styles/css/logIn.css">

    <!-- Responsive -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link href="../static/styles/css/responsive.css" rel="stylesheet">
    <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    <!--[if lt IE 9]>
    <script src="../../static/js/respond.js"></script><![endif]-->
</head>

<body>

<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
    function copy() {
  /* Get the text field */
  var copyText = document.getElementById("token");

  /* Select the text field */
  copyText.select();
  copyText.setSelectionRange(0, 99999); /* For mobile devices */

  /* Copy the text inside the text field */
  navigator.clipboard.writeText(copyText.value);

  /* Alert the copied text */
  alert("Copied");
}
</script>

<div class="page-wrapper">
{% extends "base.html" %}
{% block content %}
<div class="wrapper fadeInDown">
  <div id="formContent">

      <!-- Logo -->
      <div class="container-fluid">
          <img src="../static/images/logos/Logo_SenzaScritta.png" height="120" alt="QML" loading="lazy" />
      </div>

    <!-- Hi username,  -->
    <h5 class="font-weight-bold"> Hi, {{current_user.username}} </h5><br>

      <!-- visualizza email,  -->
    <h6 class="font-weight-bold">Your e-mail:</h6>
      <h5> {{current_user.email}} </h5><br>

    <!-- Button -->
        <h6 class="font-weight-bold">Your IBM Token:</h6>
          <input type="text" value="{{current_user.token}}" id="token" readonly style="border: none transparent; outline: none;">

            <!-- Token operations -->
           <div style="align:left">
                 <button onclick="copy()" style="padding:0; border:none; background:none;"><span class="fa fa-copy"></span> Copy Token</button>
                  <form action="{{url_for("modifyUser")}}">
                      <button type="submit" style="padding: 0; border: none; background: none;">
                          <span class="fa fa-pencil"></span>  Edit Token</button>
                  </form>
           </div>

    <!-- Admin Stats -->
    {% if current_user.isAdmin %}
        <form action="{{url_for("adminDataset")}}">
            <button type="submit" style="padding: 0; border: none; background: none;">
                <span class="fa fa-bar-chart"></span>Statistics and history of operations</button>
        </form>
    {% else %}
    <!-- User Stats -->
        <form action="{{url_for("userDataset")}}">
            <button type="submit" style="padding: 0; border: none; background: none;">
                <span class="fa fa-bar-chart"></span>Statistics and history of operations</button>
        </form>
    {% endif %}
    {% if current_user.isAdmin %}
    <!-- Admin page -->
      <form action="{{url_for("adminPage")}}">
          <button type="submit" style="padding: 0; border: none; background: none;" >
              <span class="fa fa-pencil"></span>  Admin Page</button>
      </form>
      {% endif %}
      {% if current_user.isAdmin %}
      <form action="{{url_for("ArticleApproval")}}">
          <button type="submit" style="padding: 0; border: none; background: none;">
              <span class="fa fa-pencil"></span> Article Approval</button>
      </form>
      {% endif %}

      <form action="/logout" method="post">
          <button type="submit" style="padding: 0; border: none; background: none;">
              <span class="fa fa-sign-out"></span> Logout
          </button>
      </form><br>

    <!-- Return to Log In page -->
    <div id="formFooter">
      <a class="underlineHover" href={{url_for("homepage")}}>Back to homepage</a>
    </div>

  </div>
</div>

{% endblock %}
</body>
</html>